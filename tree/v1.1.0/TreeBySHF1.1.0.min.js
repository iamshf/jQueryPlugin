/*!
* TreeBySHF Library v1.1.0
* http://cnblogs.com/iamshf
* author:盛浩峰
* Date: 2014-03-06
* 新功能：
*        1、修订了级联选中的Bug
*        2、增加了Radio和Checxbox改变时自定义方法
*        3、修订了方法名称以及相关作用域
*        4、增加了设置默认颜色的选项
*/
var IMAGEPATH="http://resource.en100.com.cn/Javascript/TreeBySHF/V1.1.0/Images/",STYLEPATH="http://resource.en100.com.cn/Javascript/TreeBySHF/V1.1.0/TreeBySHF1.1.0.min.css";$("<link>").attr({rel:"stylesheet",type:"text/css",href:STYLEPATH}).appendTo("head"),function(n){function o(r,u){n.extend(t,r),u.attr("nodeID",t.iRootPID),i=t.objTreeData.length}function s(i){n("#TreeBySHF_ul_"+t.iRootPID).addClass("TreeBySHF").children("li").last().css("background-repeat","no-repeat"),n(i).removeAttr("nodeID"),y(t.iCheckType),p(t.isExpansion)}function u(i,f){var e=[],o;n.extend(!0,e,r),o=i.length,i.each(function(i){var r=n(this).attr("nodeID"),s=h(r),b=f==t.iRootPID&&i==0?"Y":"N",k=i==o-1?"Y":"N",y="N",p="N",w=n("#TreeBySHF_img_"+r);a(r,e[i]),l(r,e[i]),c(r,e[i]),s.length>0&&(y="Y",p="Y",v(w,r),n(this).append('<ul id="TreeBySHF_ul_'+r+'">'+s+"<\/ul>"),u(n("#TreeBySHF_ul_"+r+" li"),r)),w.attr("src",IMAGEPATH+b+k+y+p+".gif")})}function h(n){var f="",u;for(r=[],u=0;u<i;u++)t.objTreeData[u].PID==n&&(f+='<li id="TreeBySHF_li_'+t.objTreeData[u].NODEID+'" nodeID="'+t.objTreeData[u].NODEID+'">',f+='<div class="TreeBySHFNodeContainer">',f+='<img style="background-color:'+t.strBackgroundColor+'" id="TreeBySHF_img_'+t.objTreeData[u].NODEID+'" src="'+IMAGEPATH+'YNNN.gif" class="TreeBySHFIco" />',f+='<input type="checkbox" id="TreeBySHF_checkbox_'+t.objTreeData[u].NODEID+'" class="TreeBySHFCheckBox" name="SelectedTreeCheckbox" value="'+t.objTreeData[u].NODEID+'" />',f+='<input type="radio" id="TreeBySHF_radiobox_'+t.objTreeData[u].NODEID+'" class="TreeBySHFRadio" name="SelectedTreeRadio" value="'+t.objTreeData[u].NODEID+'" />',f+='<a id="TreeBySHF_a_'+t.objTreeData[u].NODEID+'">'+t.objTreeData[u].NODENAME+"<\/a>",f+="<\/div>",f+="<\/li>",r.push(t.objTreeData[u]),t.objTreeData.splice(u,1),u--,i--);return f}function c(i,r){n("#TreeBySHF_radiobox_"+i).change(function(){n.isFunction(t.objRadioSwitchFunName)&&t.objRadioSwitchFunName(n(this),r)})}function l(i,r){n("#TreeBySHF_checkbox_"+i).change(function(u,o){n.isFunction(t.objCheckBoxSwitchFunName)&&t.objCheckBoxSwitchFunName(n(this),r);var s=n(this).prop("checked");o==1?f(r.PID):o==2?e(i,s):(e(i,s),f(r.PID))})}function f(t){var i=n("#TreeBySHF_ul_"+t+" .TreeBySHFCheckBox:checked").length>0;n("#TreeBySHF_checkbox_"+t).prop("checked",i).trigger("change",[1])}function e(t,i){n("#TreeBySHF_ul_"+t+" .TreeBySHFCheckBox").each(function(){n(this).prop("checked",i).trigger("change",[2])})}function a(i,r){n("#TreeBySHF_a_"+i).click(function(){n("#TreeBySHF_img_"+i).click(),t.isChangeColorOnClick&&(n("#TreeBySHF_ul_"+t.iRootPID+" a.Selected").removeClass("Selected"),n(this).addClass("Selected")),n.isFunction(t.objClickFunName)&&t.objClickFunName(n(this),r)})}function v(t,i){t.addClass("hasChildren"),t.click(function(){var t=IMAGEPATH.length,r=n(this).attr("src"),u=r.substr(t,3),f=r.substr(t+3,1);f=="Y"?(n("#TreeBySHF_ul_"+i).hide(),n(this).attr("src",IMAGEPATH+u+"N.gif")):(n("#TreeBySHF_ul_"+i).show(),n(this).attr("src",IMAGEPATH+u+"Y.gif"))})}function y(t){switch(t){case 1:n(".TreeBySHFRadio").hide(),n(".TreeBySHFCheckBox").show();break;case 2:n(".TreeBySHFCheckBox").hide(),n(".TreeBySHFRadio").show();break;default:n(".TreeBySHFCheckBox,.TreeBySHFRadio").hide()}}function p(t){t||n(".hasChildren").click()}n.fn.extend({BindTreeBySHF:function(i){return this.each(function(){o(i,n(this)),u(n(this),t.iRootPID),s(n(this))})}});var t={objTreeData:{},iCheckType:0,iRootPID:"0",isExpansion:!1,objClickFunName:{},objCheckBoxSwitchFunName:{},objRadioSwitchFunName:{},isChangeColorOnClick:!0,strBackgroundColor:"#FFFFFF"},i=0,r}(jQuery);
